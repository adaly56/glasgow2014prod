["function _bcd81b063c22ed064006295a7090651e653bb7f6",50,281770,"Media",251622,32,"edia\",config:{url:\"\",enableControls:Ext.os.is.Android?false:true,autoResume:false,autoPause:true,preload:true,loop:false,media:null,volume:1,muted:false},constructor:function(){this.mediaEvent",498925,32,304574,50,"on({scope:a,activate:a.onActivate,deactivate:a.onDeactivate});a.addMediaListener({canplay:\"onCanPlay\",play:\"onPlay\",pause:\"onPause\",ended:\"onEnd\",volumechange:\"onVolumeChange\",timeupdate:\"onTimeUpdate\"})},addMediaListener:function(c,a){var b=this,d=b.media.dom,e=Ext.Function.bind;Ext.Object.each(c,function(g,f){f=e(b[f],b);b.mediaEvents[g]=f;d.addEventListener(g,f)})},onPlay:function(){this.fireEvent(\"play\",this)},onCanPlay:function(){this.fireEvent(\"canplay\",this)},onPause:function(){this.fireEvent(\"pause\",this,this.getCurrentTime())},onEnd:function(){this.fireEvent(\"ended\",this,this.getCurrentTime())},onVolume",473141,32,"(\"volumechange\",this,this.media.dom.volume)},onTimeUpdate:function(){this.fireEvent(\"timeupdate\",this,this.getCurrentTime())},isPlaying:function(){return !Boolean(this.media.dom.paused)},onActivat",414930,32,"AutoResume()&&!a.isPlaying()){a.play()}},onDeactivat",414930,32,"AutoPause()&&a.isPlaying()){a.pause()}},updateUrl:function(a){var b=this.media.dom;b.src=a;if(\"load\" in b){b.load()}if(this.isPlaying()){this.play()}},updateEnableControls:function(a){this.media.dom.controls=a?\"controls\":false},updateLoop:function(a){this.media.dom.loop=a?\"loop\":false},play:function(){var a=this.media.dom;if(\"play\" in a){a.play();setTimeout(function(){a.play()},10)}},pause:function(){var a=this.media.dom;if(\"pause\" in a){a.pause()}},toggle:function(){if(this.isPlaying()){this.pause()}else{this.play()}},stop:function(){var a=this;a.setCurrentTime(0);a.fireEvent(\"stop\",a);a.pause()},updateVolume:function(a){this.media.dom.volume=a},updateMuted:function(a){this.fireEvent(\"mutedchange\",this,a);this.media.dom.muted=a},getCurrentTime:function(){return this.media.dom.currentTime},setCurrentTime:function(a){this.media.dom.currentTime=a;return a},getDuration:function(){return this.media.dom.duration},destroy:function(){var a=this,c=a.media.dom,b=a.mediaEvents;Ext.Object.each(b,function(e,d){c.removeEventListener(e,d)}",184175,38,281820,35076,"Video\",{extend:Ext.Media,xtype:\"video\",config:{posterUrl",438999,33,"video\"},template:[{reference:\"ghost\",classList:[Ext.baseCSSPrefix+\"video-ghost\"]},{tag:\"video\",reference:\"media\",classList:[Ext.baseCSSPrefix+\"media\"]}]",304573,51,"media.hide();a.onBefore({erased:\"onErased\",scope:a});a.ghost.on({tap:\"onGhostTap\",scope:a});a.media.on({pause:\"onPause\",scope:a});if(Ext.os.is.Android4||Ext.os.is.iPad){this.isInlineVideo=true}},applyUrl:function(a){return[].concat(a)},updateUrl:function(f){var c=this,e=c.media,g=f.length,d=e.query(\"source\"),b=d.length,a;for(a=0;a<b;a++){Ext.fly(d[a]).destroy()}for(a=0;a<g;a++){e",499871,32,"{tag:\"source\",src:f[a]}))}if(c.isPlaying()){c.play()}},onErased:function(){this.pause();this.media.setTop(-2000);this.ghost.show()},onGhostTap:function(){var a=this,c=this.media,b=this.ghost;c.show",251903,33,"2){setTimeout(function(){a.play();setTimeout(function(){c.hide()},10)},10)}else{b.hide();a.play()}},onPause",564508,42,"!this.isInlineVideo){this.media.setTop(-2000);this.ghost.show()}},onPlay",244572,44,"media.setTop(0)},updatePosterUrl:function(b){var a=this.ghost;if(a)",268490,32,"url(\"+b+\")\"",316874,11961,"carousel.Item\",{extend:Ext.Decorator,config:{baseCls:\"x-carousel-item\",component:null,translatable:true}});Ext.define(\"Ext.carousel.Indicato",448845,32,"carouselindicator\",alternateClassName:\"Ext.Carousel.Indicator",270559,37,"carousel-indicator\",direction:\"horizontal\"",447870,49,"dicators=[];this.element.on({tap:\"onTap\",scope:this})}",447412,79,"c,a,b);if(a===\"horizontal\"){this.setBottom(0);this.setRight(null)}else{this.setRight(0);this.setBottom(null)}},addIndicator:function(){this.indicators.push(this.element.createChild({tag:\"span\"}))},removeIndicator:function(){var a=this.indicators;if(a.length>0){a.pop().destroy()}},setActiveIndex:function(b){var e=this.indicators,d=this.activeIndex,a=e[d],f=e[b],c=this.getBaseCls();if(a){a.removeCls(c,null,\"active\")}if(f){f.addCls(c,null,\"active\")}this.activeIndex=b;return this},onTap:function(f){var g=f.touch,a=this.element.getPageBox(),d=a.left+(a.width/2),b=a.top+(a.height/2),c=this.getDirection();if((c===\"horizontal\"&&g.pageX>=d)||(c===\"vertical\"&&g.pageY>=b)){this.fireEvent(\"next\",this)}else{this.fireEvent(\"previou",501900,34,"d=this.indicators,b,c,a;for(b=0,c=d.length;b<c;b++){a=d[b];a.destroy()}d.length=0",293670,38,"util.TranslatableGroup",154123,32,"Abstract,config:{items:[],activeIndex:0,itemLength:{x:0,y:0}},applyItems:function(a){return Ext.Array.from(a)},doTranslate:function(n,m){var l=this.getItems(),p=this.getActiveIndex(),j=this.getItemLength(),d=j.x,c=j.y,h=Ext.isNumber(n),g=Ext.isNumber(m),e,f,k,o,b,a;for(f=0,k=l.length;f<k;f++){o=l[f];if(o){e=(f-p);if(h){b=n+e*d}if(g){a=m+e*c}o.translate(b,a)}}}});Ext.define(\"Ext.carousel.Carousel",438871,48,"Carousel\",xtype:\"carousel\",config:{baseCls:\"x-carousel\",direction:\"horizontal\",directionLock:false,animation:{duration:250,easing:{type:\"ease-out\"}},indicator:true,ui:\"dark\",itemConfig:{},bufferSize:1,itemLength:null},itemLength:0,offset:0,flickStartOffset:0,flickStartTime:0,dragDirection:0,count:0,painted:false,activeIndex:-1,before",435551,39,226036,57,",scope:this});this.element.on(\"resize\",\"onSizeChange\",this);this.carouselItems=[];this.orderedCarouselItems=[];this.inactiveCarouselItems=[];this.hiddenTranslation=0},updateBufferSize:function(n){var l=Ext.carousel.Item,h=n*2+1,m=this.isRendered(),c=this.innerElement,g=this.carouselItems,f=g.length,e=this.getItemConfig(),d=this.getItemLength(),j=this.getDirection(),b=j===\"horizontal\"?\"setWidth\":\"setHeight\",a,k;for(a=f;a<h;a++){k=Ext.factory(e,l);if(d){k[b].call(k,d)}k.setLayoutSizeFlags(this.LAYOUT_BOTH);g.push(k);c.append(k.renderElement);if(m&&k.setRendered(true)){k.fireEvent(\"renderedchange\",this,k,true)}}this.getTranslatable().setActiveIndex(n)},setRendered:function(g){var a=this.rendered;if(g!==a){this.rendered=g;var b=this.items.items,d=this.carouselItems,c,f,e;for(c=0,f=b.length;c<f;c++){e=b[c];if(!e.isInnerItem()){e.setRendered(g)}}for(c=0,f=d.length;c<f;c++){d[c].setRendered(g)}return true}return false},onSizeChange:function(){this.refreshSizing();this.refreshCarouselItems();this.refreshActiveItem()},onItemAdd:function(c,",425661,34,"d=this.getInnerItems().indexOf(c),a=this.getIndicator();if(a&&c.isInnerItem()){a.addIndicator()}if(d<=this.getActiveIndex()){this.refreshActiveIndex()}if(this.isIndexDirty(d)&&!this.isItemsInitializing){this.refreshActiveItem()}},doItemLayoutAdd:function(a){if(a.isInnerItem()){return",541472,35,"Remove:function(f,",425661,34,"h=this.getInnerItems().indexOf(f),a=this.getIndicator(),d=this.carouselItems,c,e,g;if(f.isInnerItem()&&a){a.removeIndicator()}if(h<=this.getActiveIndex()){this.refreshActiveIndex()}if(this.isIndexDirty(h)){for(c=0,e=d.length;c<e;c++){g=d[c];if(g.getComponent()===f){g.setComponent(null)}}this.refreshActiveItem()}},doItemLayoutRemove:function(a){if(a.isInnerItem()){return",541472,32,"nnerItemMove:function(b,c,a){if((this.isIndexDirty(c)||this.isIndexDirty(a))){this.refreshActiveItem()}},doItemLayoutMove:function(a){if(a.isInnerItem()){return}this.callParent(arguments)},isIndexDirty:function(b){var a=this.getActiveIndex(),c=this.getBufferSize();return(b>=a-c&&b<=a+c)},getTranslatable",156159,39,155822,49,"Group;a.setItems(this.orderedCarouselItems);a.on(\"animationend\",\"onAnimationEnd\",this)}return a},onDragStart:function(f){var d=this.getDirection(),b=f.absDeltaX,a=f.absDeltaY,c=this.getDirectionLock();this.isDragging=true;if(c){if((d===\"horizontal\"&&b>a)||(d===\"vertical\"&&a>b)){f",231650,54,233553,38,";this.dragStartOffset=this.offset;this.dragDirection=0},onDrag:function(j",232363,34,"k=this.dragStartOffset,l=this.getDirection(),m=l===\"horizontal\"?j.deltaX:j.deltaY,a=this.offset,i=this.flickStartTime,c=this.dragDirection,b=Ext.Date.now(),h=this.getActiveIndex(),f=this.getMaxItemIndex(),d=c,g;if((h===0&&m>0)||(h===f&&m<0)){m*=0.5}g=k+m;if(g>a){c=1}else{if(g<a){c=-1}}if(c!==d||(b-i)>300){this.flickStartOffset=a;this.flickStartTime=b}this.dragDirection=c;this.setOffset(g)},onDragEnd:function(j",159353,42,"j);this.isDragging=false;var a=Ext.Date.now(),i=this.itemLength,g=i/2,f=this.offset,m=this.getActiveIndex(),c=this.getMaxItemIndex(),h=0,l=f-this.flickStartOffset,b=a-this.flickStartTime,k=this.getIndicator(),d;if(b>0&&Math.abs(l)>=10){d=l/b;if(Math.abs(d)>=1){if(d<0&&m<c){h=-1}else{if(d>0&&m>0){h=1}}}}if(h===0){if(m<c&&f<-g){h=-1}else{if(m>0&&f>g){h=1}}}if(k){k.setActiveIndex(m-h)}this.animationDirection=h;this.setOffsetAnimated(h*i)},applyAnimation:function(a){a.easing=Ext.factory(a.easing,Ext.fx.easing.EaseOut);",227688,35,"b){var a=this.getIndicator();this.currentAxis=(b===\"horizontal\")?\"x\":\"y\";if(a){a.setDirection(b)}},setOffset:function(a){this.offset=a;if(Ext.isNumber(this.itemOffset)){",159804,32,"Axis(this.currentAxis,a+this.itemOffset)}return this},setOffsetAnimated:function(b){var a=this.getIndicator();if(a){a.setActiveIndex(this.getActiveIndex()-this.animationDirection)}this.offset=b",159803,33,"Axis(this.currentAxis,b+this.itemOffset,this.getAnimation());return this},onAnimationEnd:function(b){var c=this.getActiveIndex(),a=this.animationDirection,e=this.currentAxis,f=b[e],d=this.itemLength,g;if(a===-1){g=d+f}else{if(a===1){g=f-d}else{g=f}}g-=this.itemOffset;this.offset=g;this.setActiveItem(c-a",160024,34,"Sizing();this.refreshActiveItem()},refreshSizing:function(){var a=this.element,b=this.getItemLength(),e={x:0,y:0},c,d;if",194476,35,"){d=a.getWidth()}else{d=a.getHeight()}this.hiddenTranslation=-d;if(b===null){b=d;c=0}else{c=(d-b)/2}this.itemLength=b;this.itemOffset=c;e[this.currentAxis]=b;this.getTranslatable().setItemLength(e)},refreshOffset:function(){this.setOffset(this.offset)},refreshActiveItem:function(){this.doSetActiveItem(this.getActiveItem())},getActiveIndex:function(){return this.activeIndex},refreshActiveIndex:function(){this.activeIndex=this.getInnerItemIndex(this.getActiveItem())},refreshCarouselItems:function(){var a=this.carousel",187200,47,"c.getTranslatable().refresh()}this.refreshInactiveCarouselItems()},refreshInactiveCarouselItems:function(){var a=this.inactiveCarouselItems,f=this.hiddenTranslation,c=this.currentAxis,b,e,d;for(b=0,e=a.length;b<e;b++){d=a[b];d.translateAxis(c,f)}},getMaxItemIndex",259750,34,".length-1},getInnerItemIndex",257568,48,"getInnerItemAt",257568,35,"[a]},applyActiveItem:function(){var b=this.callParent(arguments),a;if(b){a=this.getInnerItemIndex(b);if(a!==-1){this.activeIndex=a;return b}}},doSetActiveItem:function(g){var q=this.getActiveIndex(),e=this.getMaxItemIndex(),m=this.getIndicator(),c=this.getBufferSize(),k=this.carouselItems.slice(),n=this.orderedCarouselItems,p={},o={},a,l,b,f,h,j,d;if(k.length===0){return}this.callParent(arguments);n.length=0;if(g){b=g.getId();o[b]=g;p[b]=c;if(q>0){for(f=1;f<=c;f++){h=q-f;if(h>=0){a=this.getInnerItemAt(h);b=a.getId();o[b]=a;p[b]=c-f}else{break}}}if(q<e){for(f=1;f<=c;f++){h=q+f;if(h<=e){a=this.getInnerItemAt(h);b=a.getId();o[b]=a;p[b]=c+f}else{break}}}for(f=0,j=k.length;f<j;f++){d=k[f];l=d.getComponent();if(l){b=l.getId();if(p.hasOwnProperty(b)){k.splice(f,1);f--;j--;delete o[b];n[p[b]]=d}}}for(b in o){if(o.hasOwnProperty(b)){a=o[b];d=k.pop();d.setComponent(a);n[p[b]]=d}}}this.inactiveCarouselItems.length=0;this.inactiveCarouselItems=k;this.refreshOffset();this.refreshInactiveCarouselItems();if(m){m.setActiveIndex(q)}},next:function(){this.setOffset(0);if(this.activeIndex===this.getMaxItemIndex()){return this}this.animationDirection=-1;this.setOffsetAnimated(-this.itemLength);return this},previous:function(){this.setOffset(0);if(this.activeIndex===0){return this}this.animationDirection=1;this.setOffsetAnimated(this.itemLength);return this},applyIndicato",246653,41,"carousel.Indicator",294470,33,"if(a){this.insertFirst(a);a.setUi(this.getUi());a.on({next:\"next\",previous:\"previous\",scope:this})}",160224,32,"carouselItems.slice();this.carouselItems.length=0;Ext.destroy(a,this.getIndicator(),this.translatable);this.callParent();delete this.carouselItems",304240,33,"mixin",219360,35,328875,80988,411965,14390,427626,43510,479238,54456,542191,26626,"defaultUserImage:\"resources/images/user.jpg\",userLocation:null,isCurrentLoc:false,myLatitude:null,myLongitude:null,API_KEY:\"AIzaSyCE-ve8YiU80_1zLqStQz9hiwfGkMEigpg\",defaultSearchRadius:3000,defaultLocation:\"-33.8670522,151.1957362\",amimationDuration:100,listImageMaxWidth:300,listImageMaxHeight:300",568884,57,"venues:\"resources/data/venues.json\"",568940,144,"7",569086,270,"b=Ext.apply({type:\"fade\",duration:this.amimationDuration},b||{});if(a&&c){",569461,65,"}else{a.setActiveItem(c)}}",569603,41,569662,106,"destroyContainer:function(a,b){Ext.Function.defer(Ext.destroy,(b||250),this,[a])},showAlertBox:function(b){var a=Ext.create(\"Ext.Container\",{cls:\"alert-box-container\",centered:true,showAnimation:\"fadeIn\",hideAnimation:\"fadeOut\",html:b});Ext.defer(function(){Ext.Viewport.add(a)},300);Ext.defer(function(){a.destroy()},1500",569905,356,"Lang.noRating",569766,142,"prettyDate:(function(){var a={second:1,minute:60,hour:3600,day:86400,week:604800,month:2592000,year:31536000};return function(e){e=+new Date(e);var f=((+new Date())-e)/1000,c,d;for(var b in a){if(f>a[b]){d=b}}c=f/a[d];c=f>a.day?(Math.round(c*100)/100):Math.round(c);c=Math.ceil(c);c+=\" \"+d+(c>1?\"s\":\"\")+\" ago\";return c}})(),onBrokenProfileImage:function(a){a.onerror=\"\";a.src=Glasgow2014.util.Util.defaultUserImage;return true",570269,34,570634,94,",{name:\"addres",572703,32,570757,404,"model.Schedule",570988,173,"model.Venu",570992,42,"{name:\"venue\"},{name:\"text",570375,54,571792,36,571166,164,580520,109,"venue\",text:\"Venues",580734,38,"Categories",578718,33,"xtype:\"categoriescontainer",581196,39,"categorie",572703,37,"Venues\",{extend:Ext.List,xtype:\"venu",571210,53,"text}\",store:\"Venu",571285,38,"Venues\"",580520,62,"title:\"Venues\",items:[",580648,73,"currentlocation",580724,48,"Venues",578718,33,"xtype:\"venuescontainer",581196,39,"venue",572703,38,"ain2",284317,33,571401,59,"venuescontainer",572704,179,"main2\",title:\"Venues\",iconCls:\"home",573071,42,577745,32,"util:Glasgow2014.util.Util,activeCategoryType:null,config:{before:{},routes:{\"\":\"getVenues\",\"categories/:type\":\"getPlaces\",\"venues/:venue\":\"getVenueCategories\"},refs:{categoriesList:\"categories\",main:\"main2\",venuesList:\"venues\",placesContainer:\"places\",venuesContainer:\"venuescontainer\",categoriesContainer:\"categoriescontainer",573378,174,"showCurrentLocBtn:'button[name=\"show_currentlocation",573548,54,"VenueBtn:'button[name=\"back_to_venu",573591,69,"venuesList:{itemtap:function(d,b,e,a){var c=this;c.util.myLongitude=a.get(\"longitude\");c.util.myLatitude=a.get(\"latitude\");c.util.isCurrentLoc=false;this.redirectTo(\"venues/\"+a.get(\"venue\"))}},categoriesList:{itemtap:function(c,b,d,a){this.redirectTo(\"categories/\"+a.get(\"type\"))}},placeList:{itemtap:function(c,b,d,a){if(this.activeCategoryType){this.redirectTo(\"categories/\"+this.activeCategoryType+\"/\"+a.get(\"reference\"))}}},placeMap:{maprender:\"showPlacesMarker",573815,41,"CurrentLocBtn:{tap:\"showCurrentLoc",573849,41,",backToHomeBtn:{tap:function(){this.redirectTo(\"venues/\"+this.activeVenue);if(this.getPlaceMapPanel()){this.getPlacesContainer().remove(this.getPlaceMapPanel())}}},backToVenueBtn:{tap:function(){if(this.getCategoriesContainer()){this.getMain().remove(this.getCategoriesContainer())}this.redirectTo(\"\")}},backToPlaceListBtn:{tap:function(){this.redirectTo(\"categories/\"+this.activeCategoryType)}}",575317,32,"a.getApplication().on({categorychange:{fn:function(b){a.activeCategoryType=b}},placechange:{fn:function(b){a.activePlaceReference=b}},venuechange:{fn:function(b){a.activeVenue=b}}})},getPlaces:function(b){var d=this;d.showPlacesContainer(b);d.getShowMapBtn().disable();d.getApplication().fireEvent(\"categorychange\",b);var a=Ext.getStore(\"Places\"),c=function(){d.util.showLoading(d.getPlaceList(),true);a",575894,37,"d.util.userLocation,action:d.util.api.nearBySearch,radius:d",575990,47,"d.util.API_KEY,types:b});a.load(function(){d.util.showLoading(d.getPlaceList(),false);d.getShowMapBtn().enable()})};if(d.util.isCurrentLoc==true",576241,62,"e){d.util.userLocation=e.coords.latitude+\",\"+e.coords.longitude;c()},failure:function(){d.util.showMsg(Lang.",576406,32,"a.removeAll();d.util.userLocation=d.util.myLatitude+\",\"+d.util.myLongitude;c()}},getVenueCategories:function(c){var b=this;b.showCategoriesContainer(c);b.getApplication().fireEvent(\"venuechange\",c);var a=Ext.getStore(\"Categories\");a.load()",576456,33,"if(a.getMain",576603,75,576679,32,"CurrentLoc:function(){var a=this;a.util.isCurrentLoc=true;this.redirectTo(\"venues/Current Location\")},getVenues:function(c){var b=this;b.showVenuesContainer(c);b.getApplication().fireEvent(\"venuechange\",c);var a=Ext.getStore(\"Venues\");a.load()},showVenuesContainer:function(c){var b=this,a=b.util.toTitleCase(c);this.getMain().add({xtype:\"venuescontainer\"});Ext.each(b.getVenu",576879,55,"\"Venues\")},b);b.getVenuesContainer().setActiveItem(0);b.util.showActiveItem(b.getMain(),b.getVenuesContainer())",576705,130,576836,146,".util.showActiveItem(c.getMain",577108,32,"CategoriesContainer:function(c){var b=this,a=b.util.toTitleCase(c);if(!b.getCategoriesContainer()){this.getMain().add({xtype:\"categoriescontainer\"})}Ext.each(b.getCategori",576879,59,"b);b.getCategoriesContainer().setActiveItem(0);b.util.showActiveItem(b.getMain(),b.getCategori",577120,52,577311,396,",showPlacesMarkers:function(c,d){var e=this;var b;var f;var a;userLocation=e.util.userLocation.split(\",\"),currentPosition=new google.maps.LatLng(userLocation[0],userLocation[1]),image=new google.maps.MarkerImage(\"resources/images/marker.png\",new google.maps.Size(32,32),new google.maps.Point(0,0)),ib=new InfoBubble({shadowStyle:1,padding:0,backgroundColor:\"rgb(0,0,0)\",borderRadius:4,arrowSize:15,borderWidth:1,borderColor:\"#000\",disableAutoPan:true,hideCloseButton:true,arrowPosition:30,backgroundClassName:\"infobubble\",arrowStyle:2}),new google.maps.Marker({position:currentPosition,map:d,icon:new google.maps.MarkerImage(\"resources/images/currentlocation.png\",new google.maps.Size(32,32),new google.maps.Point(0,0))});setupInfoBubble=function(h,g){google.maps.event.addListener(g,\"mousedown\",function(i){if(ib){ib.close()}ib.placeReference=h.reference;ib.setContent(['<div class=\"infobubble-content\">',h.name,\"</div>\"].join(\"\"));ib.open(d,this)})};google.maps.event.addDomListener(ib.bubble_,\"click\",function(){if(e.activeCategoryType){e.redirectTo(\"categories/\"+e.activeCategoryType+\"/\"+ib.placeReference)}});e.getPlaceList().getStore().each(function(g){f=g.getData(),b=f.geometry.location,a=new google.maps.Marker({position:new google.maps.LatLng(b.lat,b.lng),map:d,icon:image});setupInfoBubble(f,a)},e);Ext.defer(function(){d.setCenter(currentPosition)},100)},checkCategories:function(b){var a=Ext.getStore(\"Categories\");if(a.getCount()===0){a.on(\"load\",function(){b.resume()})}else{b.resume()}",577706,39,"PlaceDetail",573120,66,"outes:{\"categories/:type/:reference\":\"showDetails\"},refs:{main:\"main2\",placeDetailsPanel:\"detailspanel\",placeDetailsInfo:\"info\",placeDetailsGallery:\"gallery\",placeDetailsReview:\"review\"},control:{placeDetailsReview:{initialize:\"handleReviewExpansion\"}}},showDetails:function(c,a){var b=this;if(!b.getPlaceDetailsPanel()){b.getMain().add({xtype:\"detailspanel\"})}b.util.showActiveItem(b.getMain(),b.getPlaceDetailsPanel());b.loadPlaceDetails(a);b.getApplication().fireEvent(\"categorychange\",c);b.getApplication().fireEvent(\"placechange\",a)},loadPlaceDetails:function(a){var b=this;b.util.showLoading(b.getPlaceDetailsPanel(),true);Ext.Ajax.request({url:b.util.api.baseUrl,method:\"GET\",params:{action:b.util.api.details,reference:a,key:b.util.API_KEY,sensor:true},success:function(c){b.util.showLoading(b.getPlaceDetailsPanel(),false);var d=b.currentLocation=Ext.decode(c.responseText);b.getPlaceDetailsInfo().setData(d.result);b.getPlaceDetailsGallery().setData(d.result);b.getPlaceDetailsReview().setData(d.result);b.showPlaceLocation()},failure:function(){b.util.showMsg(Lang.serverConnectionError)}})},showPlaceLocation:function(){var a=this,b=function(){var c=a.currentLocation.result.geometry.location,d=new google.maps.LatLng(c.lat,c.lng),e=new google.maps.MarkerImage(\"resources/images/marker.png\",new google.maps.Size(32,32),new google.maps.Point(0,0));a.singleMapMarker=new google.maps.Marker({position:d,map:a.gmap,icon:e});Ext.defer(function(){a.gmap.setCenter(d)},100)};if(a.singleMap){a.singleMap.destroy()}a.singleMap=Ext.create(\"Ext.Map\",{renderTo:a.getPlaceDetailsInfo().element.down(\".map\"),height:140,mapOptions:{zoom:15},listeners:{maprender:function(d,c){a.gmap=c;b()}}})},handleReviewExpansion:function(a){a.element.on(\"singletap\",function(c,b){b=Ext.get(b),textEl=b.parent(\".text\");if(b.getAttribute(\"data-action\")===\"more\"){textEl.setHtml(textEl.next(\".full-review\").getHtml()+' <span data-action=\"less\" class=\"resize-action\">less</span>')}if(b.getAttribute(\"data-action\")===\"less\"){textEl.setHtml(Ext.String.ellipsis(textEl.getHtml(),120)+' <span data-action=\"more\" class=\"resize-action\">more</span>')}},this,{delegate:\".resize-action\"})",581120,33,"Main\",{extend:Ext.tab.Panel,xtype:\"main\",config:{tabBarPosition:\"bottom\",items:[{title:\"Welcome\",iconCls:\"home\",styleHtmlContent:true,scrollable:true,items",471485,32,"title:\"Welcome to Sencha Touch 2\"},html:[\"You've just generated a new Sencha Touch 2 project. What you're looking at right now is the \",\"contents of <a target='_blank' href=\\\"app/view/Main.js\\\">app/view/Main.js</a> - edit that file \",\"and refresh to change what's rendered here.\"].join(\"\")},{title:\"Get Started\",iconCls:\"action\",items:[{docked:\"top\",xtype:\"titlebar\",title:\"Getting Started\"},{xtype:\"video\",url:\"http://av.vimeo.com/64284/137/87347327.mp4?token=1330978144_f9b698fea38cd408d52a2393240c896c\",posterUrl:\"http://b.vimeocdn.com/ts/261/062/261062119_640.jpg",580734,38,571506,128,"<p>Address is {address",571672,121,",action:\"buttonTap\",parmListId:\"this.data.venue",572704,37,578716,91,"name:\"schedule_place_map\",height:\"100%",580882,33,578864,124,579058,57,579735,296,"document.getElementById(\"tpl_placelist_item\").innerHTML",580220,80,580301,48,"['<div class=\"icon-wrapper\">','",580376,69,"',\"</div>\"].join(\"\")",580452,189,"Place Types",581022,33,"text:\"Map\"",580709,309,"Place Types",581022,253,"view.details.Info\",{extend:Ext.Container,xtype:\"info\",config:{cls:\"transparent details-info\",iconCls:\"info\",title:\"info\",scrollable:true,tpl:Ext.create(\"Ext.XTemplate\",document.getElementById(\"tpl_place_details_info\").innerHTML,{",580454,66,581120,33,"details.Gallery\",{extend:Ext.Container,xtype:\"gallery\",config:{title:Lang.gallery,iconCls:\"photos2\",cls:\"transparent gallery\",scrollable:true,t",580001,32,"tpl if=\"this.isEmpty(values)\">','<div class=\"empty-text empty-gallery\">',Lang.placeDetails.emptyGallery,\"</div>\",\"</tpl>\",'<div class=\"gallery body\" id=\"photos\">','<tpl for=\"photos\">','<img src=\"{url}\" class=\"thumbnail\" />',\"</tpl>\",\"</div>\",{isEmpty:function(a){if(!a.photos||a.photos.length===0){return true}return false}})",304572,35,"console.log(\"in galleryt\");a.element.on(\"tap\",function(c,b){a.showGalleryCarousel(b)},a,{delegate:\"img.thumbnail\"});a.callParent(arguments)},showGalleryCarousel:function(a){var c=this,b=0;c.images=c.element.query(\"img.thumbnail\");var d=Ext.Viewport.add({xtype:\"gallerycarousel\",images:c.images});d.element.on(\"tap\",function(g,f){d.hide(true);Ext.defer(function(){Ext.Viewport.remove(d)},300)},this,{delegate:'div[data-action=\"close_carousel\"]'});while((a=a.previousSibling)!=null){b++}d.setActiveItem(b);d.show()",581120,33,"details.Review\",{extend:Ext.Container,xtype:\"review\",config:{cls:\"transparent\",title:\"reviews\",iconCls:\"chat2\",scrollable:true,tpl:Ext.create(\"Ext.XTemplate\",document.getElementById(\"tpl_place_details_reviews\").innerHTML,{toTitleCase",580463,42,"toTitleCase(a)},getDate",580463,42,"prettyDate(a*1000)},getUserImage:function(b){if(b){var a=b.split(\"/\");return\"https://plus.google.com/s2/photos/profile/\"+a[a.length-1]+\"?sz=50\"}return Glasgow2014.util.Util.defaultUserImage},getStars",580463,53,",3,true)},isEmpty:function(a){if(!a.reviews||a.reviews.length===0){return true}return false},applyExpandable:function(a){var b=a.text;if(b.length>120){b=Ext.String.ellipsis(b,120)+' <span data-action=\"more\" class=\"resize-action\">more</span>'}return b}})",581120,33,"details.Main\",{extend:Ext.tab.Panel,xtype:\"detailspanel\",config:{cls:\"details-tabpanel default-bg\",tabBar:{docked:\"bottom\"},items:[{xtype:\"info\"},{xtype:\"gallery\"},{xtype:\"review\"",580904,33,"title:\"Details\",items:[{text:\"Places\",ui:\"back\",name:\"back_to_placelist",580734,38,"details.GalleryCarousel\",{extend:Ext.carousel.Carousel,xtype:\"gallerycarousel\",config:{fullscreen:true,modal:true,images:[],html:'<div class=\"close-gallery\" data-action=\"close_carousel\"></div>',cls:\"gallery-carousel\",showAnimation:\"popIn\",hideAnimation:\"popOut\",indicator:false,listeners:{initialize:\"changeImageCount\",activeitemchange:\"changeImageCount\"}},initialize:function(){var c=this,a=c.getImages();console.log(\"image count is\"+a.length);c.bottomBar=Ext.create(\"Ext.TitleBar\",{xtype:\"titlebar\",name:\"info_bar\",title:\"\",docked:\"bottom\",cls:\"gallery-bottombar\",items:[{xtype:\"button\",align:\"left\",iconCls:\"nav gallery-left\",ui:\"plain\",handler:function(){c.previous()}",581023,41,"nav gallery-right\",ui:\"plain\",handler:function(){c.next()}}]});for(var b=0;b<a.length;b++){console.log(\"in images add\"+a[b].src);c.add({xtype:\"container\",html:'<img class=\"gallery-item\" src=\"'+a[b].src+'\" />',index:b+1})}c.add(c.bottomBar);c.callParent(arguments)},changeImageCount:function(){var a=this;a.bottomBar.setTitle((a.getActiveIndex()+1)+\" of \"+a.getImages().length)",582016,34,581487,749,581461,34,"Places",581294,58,"Schedule",582114,114,",listeners:{load:function(a){alert(a.getCount())",582014,36,"Venues",581294,58,"Venue\",autoLoad:true,id:\"VenuesStoreId\",sorters:\"venu",581851,46,"venue\")}}",582120,50,"venu",581966,37,"items\"}}}});Ext.Loader.setPath({Ext:\"touch/src\",Glasgow2014:\"app\"",582229,54,582294,32,",\"SchedulePlace\",\"Venue\"],stores:[",582352,41,",\"SchedulePlaces\",\"Venues\"],views:[\"Main\",\"MyTabPanel\",\"MyPanel",582498,51,"CategoriesContainer\",\"VenuesContainer\",\"PlaceMap\",\"Places\",\"details.Main\",\"details.Info\",\"details.Gallery\",\"details.Review\",\"details.GalleryCarousel\",\"Venues\"],controllers:[\"App\",\"PlaceDetails",582597,40,"Ext.fly(\"appLoadingIndicator\").destroy(",582709,61,";viewport:{autoMaximize:false}}});"]